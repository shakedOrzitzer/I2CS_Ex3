# Pac-Man: Ex3Algo Implementation

The Ex3Algo class automates Pac-Man gameplay using a robust Finite State Machine (FSM) and BFS pathfinding. This combination allows the agent to navigate the maze efficiently, maximizing scores while intelligently outmaneuvering ghosts.

---

## ðŸ§  Algorithmic Logic: The State Machine

The Algo's behavior is determined by a state machine that evaluates the environment in real-time. Based on the proximity of ghosts and the availability of items, Pac-Man switches between four distinct behaviors:

| State | Constant | Condition |
| :--- | :--- | :--- |
| **BLACK** | Ghost < 8 steps away & NOT eatable. | **Flee:** Moves to the neighbor cell furthest from the ghost. |
| **WHITE** | Ghost < 6 steps away & IS eatable. | **Hunt:** Aggressively chases the ghost for bonus points. |
| **GREEN** | Green dot < 2 steps away. | **Snatch:** Quickly grabs the nearby power-up. |
| **PINK** | Default state. | **Forage:** Navigates to the nearest pink dot via shortest path. |

---

## ðŸ› ï¸ Key Technical Features

### 1. Tunnel-Aware Navigation
The `moveTo` method is specifically programmed to handle the map's **cyclic boundaries**. It detects if a target pixel is on the opposite side of the map (a "tunnel") and directs Pac-Man to cross the edge rather than walking across the entire board.



### 2. Distance Mapping (`Map2D`)
The algorithm uses a distance heat map generated by `map.allDistance()`. This allows Pac-Man to know the **actual number of steps** required to reach any point on the board, accounting for walls and obstacles.

### 3. Intelligent Fleeing
The `runAway` method performs a look-ahead:
1. It identifies the closest ghost.
2. It evaluates all valid adjacent moves (Up, Down, Left, Right).
3. It selects the direction that maximizes the distance from the ghost's current position.

---

## ðŸ“‚ Code Overview

* **`move(PacmanGame game)`**: The main engine loop. It refreshes game data, determines the current `state`, and returns the next move.
* **`getState(...)`**: The decision-making core that prioritizes survival over point collection.
* **`getClosestGhostIndex`**: Uses the shortest path logic to identify which ghost is the most immediate threat.
* **`closestPink` / `closestGreen`**: Scans the map for the nearest items using the pre-calculated distance maps.

---

## ðŸš€ How to Run in IntelliJ

Currently, the game cannot run without IDE, and you run the game via the provided `Ex3Main`.

> **Tip:** To switch levels and DTs- you can! it has to be done manually in the `GameInfo` class.
---
